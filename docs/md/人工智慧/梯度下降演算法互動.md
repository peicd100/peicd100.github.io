你可以更改以下數字(初始值不可更改)，你可以從「最大迭代次數 (max iterations)=0」開始，慢慢增加迭代次數，看看迭代過程。

---

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        input[type="number"] {
            background-color: transparent;
            border: none;
            border-bottom: 2px solid #F2BBFF;
            font-size: 16px;
            padding: 5px;
            width: 100px;
            text-align: center;
            outline: none;
        }
        input[type="number"]:focus {
            border-bottom-color: #F2BBFF;
        }
        .chart-container {
            width: 90%;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            background-color: white; /* 設置背景為白色 */
        }
        #output {
            font-size: 16px;
            white-space: pre-line; /* 保持換行格式 */
        }
    </style>
</head>
<body>
    <div class="input-container">
        <div>
            <label>初始值 (x): 10</label>
        </div>
        <div>
            <label>學習率 (learning rate): <input type="number" id="learningRate" value="0.7" step="0.1"></label>
        </div>
        <div>
            <label>最大迭代次數 (max iterations): <input type="number" id="maxIterations" value="50" step="1"></label>
        </div>
        <div>
            <label>收斂條件 (tolerance): <input type="number" id="tolerance" value="0.1" step="0.01"></label>
        </div>
    </div>

    <!-- 圖表區域 -->
    <div class="chart-container">
        <canvas id="gradientChart"></canvas>
    </div>
    <div class="chart-container">
        <canvas id="lossChart"></canvas>
    </div>
    <div class="chart-container">
        <canvas id="xChart"></canvas>
    </div>

    <p id="gradientOutput"></p>

    <script>
        let lossChart, xChart, gradientChart;

        // 定義損失函數和梯度
        function lossFunction(x) {
            return x ** 2;
        }

        function gradient(x) {
            return 2 * x;
        }

        // 計算梯度下降並更新圖表
        function runGradientDescent() {
            const outputDiv = document.getElementById('gradientOutput');
            outputDiv.innerHTML = ''; // 清空結果
            
            // 獲取參數
            const x0 = 10;
            const learningRate = parseFloat(document.getElementById('learningRate').value);
            const maxIterations = parseInt(document.getElementById('maxIterations').value);
            const tolerance = parseFloat(document.getElementById('tolerance').value);

            let x = x0;
            let iteration = 0;
            const xValues = [x];
            const lossValues = [lossFunction(x)];
            const iterationIndices = [0];

            let resultText = `開始梯度下降:\n初始值 x = ${x0}, 學習率 = ${learningRate}, 最大迭代次數 = ${maxIterations}, 收斂條件 = ${tolerance}\n\n`;

            resultText += `計算: x_new = x - η * f'(x) ：\n`;

            while (iteration < maxIterations) {
                const grad = gradient(x);
                const loss = lossFunction(x);
                const prex = x;

                // 更新 x
                x = x - learningRate * grad;

                resultText += `${x.toFixed(6)} = ${prex.toFixed(6)} - ${learningRate} * ${grad.toFixed(6)}\n`;

                iteration++;
                xValues.push(x);
                lossValues.push(lossFunction(x));
                iterationIndices.push(iteration);

                if (Math.abs(grad) < tolerance) {
                    resultText += `梯度下降已收斂 ( ${Math.abs(grad).toFixed(6)}<${tolerance} ) ，停止迭代。\n\n`;
                    break;
                }
            }

            resultText += `最終結果: x = ${x.toFixed(6)}, Loss = ${lossFunction(x).toFixed(6)}, 迭代次數 = ${iteration}\n`;

            // 使用 innerHTML 來顯示換行
            outputDiv.innerHTML = resultText.replace(/\n/g, "<br>");

            // 更新圖表
            drawGradientChart(xValues, lossValues);
            drawLossChart(iterationIndices, lossValues);
            drawXChart(iterationIndices, xValues);
        }

        // 繪製梯度下降圖表
        function drawGradientChart(xValues, lossValues) {
            const ctx = document.getElementById('gradientChart').getContext('2d');
            const xRange = Array.from({ length: 500 }, (_, i) => -12 + (i * 24) / 500);
            const yRange = xRange.map(x => lossFunction(x));
            if (gradientChart) gradientChart.destroy();
            gradientChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xRange,
                    datasets: [
                        {
                            label: 'Gradient Descent Steps',
                            data: xValues.map((x, i) => ({ x, y: lossValues[i] })),
                            type: 'scatter',
                            backgroundColor: 'red',
                            pointRadius: 5
                        },
                        {
                            label: 'y = x^2',
                            data: yRange,
                            borderColor: 'blue',
                            fill: false,
                            pointRadius: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: { type: 'linear', title: { display: true, text: 'x Value' } },
                        y: { title: { display: true, text: 'y (Loss)' } }
                    }
                }
            });
        }

        // 繪製損失值變化圖表
        function drawLossChart(iterationIndices, lossValues) {
            const ctx = document.getElementById('lossChart').getContext('2d');
            if (lossChart) lossChart.destroy();
            lossChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: iterationIndices,
                    datasets: [{
                        label: 'Loss Value Over Iterations',
                        data: lossValues,
                        borderColor: 'blue',
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: true }
                    },
                    scales: {
                        x: { title: { display: true, text: 'Iterations' } },
                        y: { title: { display: true, text: 'Loss Value' } }
                    }
                }
            });
        }

        // 繪製 x 值變化圖表
        function drawXChart(iterationIndices, xValues) {
            const ctx = document.getElementById('xChart').getContext('2d');
            if (xChart) xChart.destroy();
            xChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: iterationIndices,
                    datasets: [{
                        label: 'x Value Over Iterations',
                        data: xValues,
                        borderColor: 'orange',
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: true }
                    },
                    scales: {
                        x: { title: { display: true, text: 'Iterations' } },
                        y: { title: { display: true, text: 'x Value' } }
                    }
                }
            });
        }

        // 監聽輸入框變化並重新計算
        document.querySelectorAll('.input-container input').forEach(input => {
            input.addEventListener('input', runGradientDescent);
        });

        // 初次加載時運行梯度下降
        window.addEventListener('DOMContentLoaded', runGradientDescent);
    </script>
</body>
</html>


(內容消失時請重新整理或按下f5)